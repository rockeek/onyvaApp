<ion-header>
    <ion-navbar [hideBackButton]="isLoading">
        <ion-title>Club</ion-title>
    </ion-navbar>
</ion-header>

<ion-content>
    <ion-card>
        <ion-card-content>
            <h2 id="clubName">{{displayedName}}</h2>
            <ion-spinner *ngIf="isLoading" icon="spiral"></ion-spinner>
        </ion-card-content>
        
        <form [formGroup]="form" (ngSubmit)="save(form.value)">
            <ion-item margin-bottom *ngIf="club.clubId">
                <ion-label>Id</ion-label>
                <ion-input type="text" formControlName="clubId" readonly="true"></ion-input>	    	
            </ion-item>
            <ion-item margin-bottom *ngIf="club.clubId == null">
                <ion-label>Club name</ion-label>
                <ion-input type="text" formControlName="name"></ion-input>	    	
            </ion-item>

            <ion-item margin-bottom>
                <ion-label>Password</ion-label>
                <ion-input type="text" formControlName="password" [readonly]="isSharing()"></ion-input>
            </ion-item>
            <ion-item class="validation" 
                *ngIf="!isSharing() && form.get('password').hasError('minlength') && (form.get('password').dirty || form.get('password').touched)">
                <p>Password must be at least 6 characters</p>
            </ion-item>
            <ion-item class="validation" 
                *ngIf="!isSharing() && club.isInvalid && !(form.get('password').dirty || form.get('password').touched)">
                <p>The password for this club is not correct. Try again.</p>
            </ion-item>
            <ion-item class="information" *ngIf="isSharing()">
                <p>Remember the password is case sensitive.</p>
            </ion-item>
        
            <ion-item margin-bottom *ngIf="club.isInvalid">
                <button ion-button color="primary"
                    text-center
                    block
                    [disabled]="!form.valid">Join</button>
            </ion-item>
            <ion-item margin-bottom *ngIf="!club.isInvalid">
                <button ion-button color="primary"
                    text-center
                    block
                    [disabled]="!form.valid">Share</button>
            </ion-item>
        </form>
    </ion-card>
</ion-content>